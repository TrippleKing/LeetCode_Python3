股票的最大利润

# 题目描述

假设把某股票的价格按照时间先后顺序存储在数组中，请问买卖该股票一次可能获得的最大利润是多少？

## 示例1

```
输入: [7,1,5,3,6,4]
输出: 5
解释: 在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。
     注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格。
```

## 示例2

```
输入: [7,6,4,3,1]
输出: 0
解释: 在这种情况下, 没有交易完成, 所以最大利润为 0。
```

## 限制

- `0 <= 数组长度 <= 10^5`

# 解题思路

设共有`n`天，第`a`天买入，第`b`天卖出，需保证`a < b`；可推出交易方案总数为：
$$
(n-1)+(n-2)+...+2+1=\frac{n(n-1)}{2}
$$
因此，暴力枚举的时间复杂度为$O(N^2)$。考虑使用动态规划进行优化。

**动态规划解析**：

- **状态定义**：设动态规划列表`dp`，`dp[i]`代表以前`i`日的最大利润
- **转移方程**：由于题目限定"买卖该股票一次"，对于第`i`日存在两种情况：

  - 选择第`i`日卖出，则最大利润为第`i`日价格 - 前`i`日最低价格
  - 第`i`日不卖，则最大利润为前`i-1`日最大利润
  - 即`dp[i] = max(dp[i-1], prices[i] - min(prices[:i]))`
- **初始状态**：`dp[0] = 0`
- **返回值**：返回`dp`数组中的最大值

**效率优化**：

- **优化时间复杂度**：前`i`日的最低价格`min(prices[:i])`的时间复杂度为$O(i)$。在遍历`prices`时，可以借助一个变量`cost`每日更新最低价格。优化后转移方程为：

$$
dp[i] = max(dp[i-1], prices[i] - min(cost,prices[i]))
$$

- **优化空间复杂度**：由于`dp[i]`只与`dp[i-1], prices[i], cost`有关，因此可使用一个变量`profit`代替`dp`数组，优化后转移方程为：

$$
profit = max(profit, prices[i]-cost)
$$

## 复杂度分析

- 时间复杂度：$O(N)$
- 空间复杂度：$O(1)$

## 代码

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        cost = float("+inf")
        profit = 0
        for price in prices:
            cost = min(cost, price)
            profit = max(price - cost, profit)
        
        return profit
```

