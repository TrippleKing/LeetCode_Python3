模拟行走机器人

# 题目描述

机器人在一个无限大小的网格上行走，从点`（0,0）`处开始出发，面向北方。该机器人可以接收以下三种类型的命令：

- `-2`：向左转90度
- `-1`：向右转90度
- `1 <= x <= 9`：向前移动`x`个单位长度

在网格上有一些格子被视为障碍物。

第`i`个障碍物位于网格点`(obstacles[i][0],obstacles[i][1])`机器人无法走到障碍物上，它将停留在障碍物的前一个网格点上，但仍然可以继续改路线的其余部分。

返回从原点到机器人的最大欧氏距离的**平方**。

## 示例1

```
输入: commands = [4,-1,3], obstacles = []
输出: 25
解释: 机器人将会到达 (3, 4)
```

## 示例2

```
输入: commands = [4,-1,4,-2,4], obstacles = [[2,4]]
输出: 65
解释: 机器人在左转走到 (1, 8) 之前将被困在 (1, 4) 处
```

## 提示

- `0 <= commands.length <= 10000`
- `0 <= obstacles.length <= 10000`
- `-30000 <= obstacle[i][0] <= 30000`
- `-30000 <= obstacle[i][1] <= 30000`

# 解题思路

> 这道题，看完题目可能还没明白题目的意思。可以在白纸上画一个`x-y`直角坐标系，原点即为机器人初始点，`面向北方`可以理解为机器人面向`y轴正方向`，指令`-1、-2`仅使机器人发生转向，移动时仅朝机器人面向的方向进行直线运动，若会遇到障碍物，则在障碍物前一格停止，可以继续接收指令。

## 算法思路

设置`dx,dy`表示方向变量，当接收到转向指令时发生改变：

- 初始时，面向北方，则`dx=0,dy=1`；
- 接收指令`-2`，左转90度，则`dx=-dy,dy=dx`；
- 接收指令`-1`，右转90度，则`dx=dy,dy=-dx`。

注意：每次转向时，是以当前面向为基准区分左/右方向。

由于每次移动时，都是沿着当前面向的方向做直线运动，则可以设置`x,y`变量来记录真实坐标位置（每次只可能沿一个方向移动）。

由于障碍物的存在，我们在移动机器人时，需要判断是否会遇到障碍物，如果遇到，只能在障碍物前停下。可以将障碍物的坐标信息加入集合，这样判断坐标是否冲突时可以以$O(1)$时间内完成（列表需要$O(N)$）。

最后，题目所要求的最大距离并不一定是机器人最终所在的位置，每执行一次移动指令，需要对最大距离进行更新。（需要明白，最大距离一定是某一次移动指令的起点距离或者终点距离，移动过程中并不会产生最大距离）

## 复杂度分析

> $N$表示移动指令的数量；$M$表示移动的步数；$K$表示障碍物个数

- 时间复杂度：$O(NM)$
- 空间复杂度：$O(K)$，用于存放障碍物坐标的集合

## 代码

```python
class Solution:
    def robotSim(self, commands: List[int], obstacles: List[List[int]]) -> int:
        dx, dy = 0, 1
        x, y = 0, 0
        obs = set()
        distance = 0
        for obstacle in obstacles:
            obs.add(tuple(obstacle))
        for command in commands:
            if command == -2:
                dx, dy = -dy, dx
            elif command == -1:
                dx, dy = dy, -dx
            else:
                for _ in range(command):
                    next_x = x + dx
                    next_y = y + dy
                    if (next_x, next_y) in obs:
                        break
                    x, y = next_x, next_y
                distance = max(distance, int(math.pow(x, 2)+math.pow(y, 2)))
        
        return distance
```

